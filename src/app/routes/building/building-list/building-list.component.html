<div class="w-full" fxLayout="row" fxLayoutAlign="center none">
  <div fxFlex="95%">
    <mat-card>
      <mat-card-content>
        <!-- <breadcrumb></breadcrumb> -->

        <h1 class="mb-6 text-lg">Building Permit</h1>
        <div class="flex">
          <div class="flex-auto">
            <mat-form-field class="w-1/3" appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Jordan" #input />
            </mat-form-field>
          </div>
          <div>
            <div class="flex gap-2 m-2">
              <button mat-mini-fab matTooltip="Refresh List" mat-flat-button color="primary">
                <mat-icon>refresh</mat-icon>
              </button>
              <button
                mat-mini-fab
                matTooltip="Create Building Permit"
                mat-flat-button
                color="primary"
                (click)="createBuildingPermit()"
              >
                <mat-icon>add</mat-icon>
              </button>
              <!-- <button mat-flat-button color="primary" [routerLink]="['/building/create']">
                <mat-icon>add</mat-icon>
                Create
              </button> -->
            </div>
          </div>
        </div>

        <section class="mt-5">
          <mtx-grid
            [pageSize]="5"
            [pageSizeOptions]="[5, 10, 15]"
            [data]="list"
            [rowHover]="true"
            [rowStriped]="true"
            [columns]="columns"
            [showToolbar]="true"
            [noResultTemplate]="noResultTpl"
            [cellTemplate]="{ created_at: createdAtTpl, birthDate: birthDateTpl }"
          >
          </mtx-grid>
          <ng-template #noResultTpl>
            <div>
              <p>No records found</p>
            </div>
          </ng-template>
          <ng-template #createdAtTpl let-row let-index="index" let-col="colDef">
            {{ row.created_at | date: 'short' }}
          </ng-template>
          <ng-template #birthDateTpl let-row let-index="index" let-col="colDef">
            {{ row.birthDate | date: 'longDate' }}
          </ng-template>
        </section>

        <!-- <section id="print-section">
          <mat-table matSort [dataSource]="dataSource">
            <ng-container matColumnDef="building-permit-no">
              <mat-header-cell mat-sort-header *matHeaderCellDef>BP No</mat-header-cell>
              <mat-cell *matCellDef="let element" data-label="BP No">{{
                element.buildingPermitNo
              }}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="applicant">
              <mat-header-cell mat-sort-header *matHeaderCellDef>Applicant</mat-header-cell>
              <mat-cell *matCellDef="let element" data-label="Applicant">
                {{ element.applicant?.firstName }} {{ element.applicant?.middleInitial }}.
                {{ element.applicant?.lastName }}
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="location">
              <mat-header-cell mat-sort-header *matHeaderCellDef>Location</mat-header-cell>
              <mat-cell *matCellDef="let element" data-label="Location">
                {{ element.constructionLocation ? element.constructionLocation.lotNo : '' }}
                {{ element.constructionLocation ? element.constructionLocation.blockNo : '' }}
                {{ element.constructionLocation ? element.constructionLocation.street : '' }}
                {{ element.constructionLocation ? element.constructionLocation.baranggay : '' }}
                {{ element.constructionLocation ? element.constructionLocation.cityMun : '' }}
              </mat-cell>
            </ng-container>

            <ng-container matColumnDef="applicationNo">
              <mat-header-cell mat-sort-header *matHeaderCellDef>Application No</mat-header-cell>
              <mat-cell *matCellDef="let element" data-label="applicationNo">
                {{ element.applicationNo }}</mat-cell
              >
            </ng-container>
            <ng-container matColumnDef="date">
              <mat-header-cell mat-sort-header *matHeaderCellDef>Date</mat-header-cell>
              <mat-cell *matCellDef="let element" data-label="Date">{{
                element.created_at | date: 'mediumDate'
              }}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="action">
              <mat-header-cell mat-sort-header *matHeaderCellDef>Action</mat-header-cell>
              <mat-cell *matCellDef="let element" data-label="Action">
                <div>
                  <button
                    matTooltip="Edit Permit"
                    class=""
                    mat-icon-button
                    color="primary"
                    (click)="edit(element)"
                  >
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button
                    matTooltip="View Details"
                    mat-icon-button
                    color="primary"
                    (click)="edit(element)"
                  >
                    <mat-icon>remove_red_eye</mat-icon>
                  </button>
                  <button
                    matTooltip="Print Application"
                    class=""
                    mat-icon-button
                    color="primary"
                    (click)="printPermitApplication(element)"
                  >
                    <mat-icon>print</mat-icon>
                  </button>
                  <button
                    matTooltip="Apply Other Permit"
                    class=""
                    mat-icon-button
                    color="primary"
                    (click)="openDialog()"
                  >
                    <mat-icon>dialpad</mat-icon>
                  </button>
                  <button
                    disabled
                    matTooltip="Issue Order Payment"
                    class=""
                    mat-icon-button
                    color="primary"
                  >
                    <mat-icon>payment</mat-icon>
                  </button>
                  <button
                    [disabled]="element.isApproved"
                    (click)="approveBuildingPermit(element)"
                    matTooltip="Approve Application"
                    [class]="element.isApproved ? 'text-gray-300' : 'text-green-600'"
                    mat-icon-button
                  >
                    <mat-icon>check_circle</mat-icon>
                  </button>
                </div>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="columns"></mat-header-row>
            <mat-row
              *matRowDef="let row; columns: columns"
              (click)="selection.toggle(row)"
            ></mat-row>
          </mat-table>
          <mat-paginator
            [pageSizeOptions]="[2, 5, 10, 20]"
            showFirstLastButtons
            aria-label="Select page of periodic elements"
          >
          </mat-paginator>
        </section> -->
      </mat-card-content>
    </mat-card>
  </div>
</div>
